{"title":"Inequality","markdown":{"yaml":{"title":"Inequality","subtitle":"Makeover of Pyramid Plot","date":"2022-10-10","tags":["fun","design"]},"headingText":"Why I don't like the pyramid plot","containsRefs":false,"markdown":"\n\nI love [Future Crunch](https://futurecrunch.com/). The idea of receiving positive news that I wouldn't otherwise get is fantastic and I appreciate the work they do. However, during one of the latest editions I got a pyramid plot coming from [Credit Suisse](https://www.credit-suisse.com/about-us-news/en/articles/news-and-expertise/credit-suisse-global-wealth-report-2022-fast-wealth-growth-in-times-of-uncertainty-202209.html?ref=Future+Crunch-newsletter) which was really hard to read. Moreover, the people who made the plot were trying to make the case that the world is a better place, because there is less inequality.\n\nYou are welcome to try to interpret the plot on its source, [here's the link again](https://www.credit-suisse.com/about-us-news/en/articles/news-and-expertise/credit-suisse-global-wealth-report-2022-fast-wealth-growth-in-times-of-uncertainty-202209.html?ref=Future+Crunch-newsletter). Because I think the representation is lacking, I do want to produce my own version using their data (aka, the values provided in their plot). Here's a basic table for their data:\n\n```{r}\n#| label: data\n#| warning: !expr F\n#| message: !expr F\nlibrary(tidyverse)\nlibrary(waffle)\nranges <- 1:4\nnames(ranges) <- c(\"<10K\", \"10K-100K\", \"100K-1M\", \"1M+\")\nvalues_2011 <-c(3054, 1066, 369, 29.7)\nvalues_2021 <- c(2818, 1791, 627, 62.5)\nfill_color = c(\"#b27500ff\", \"#ebaf34ff\", \"#e5d2afff\", \"#265682ff\")\n\ntab <-\ntibble::tibble(\n  ranges=ranges,\n  labels=factor(names(ranges), levels = names(ranges)),\n  below = c(\"<10K\", \"10K+\", \"10K+\",\"10K+\"),\n  values_2011,\n  values_2021\n) %>% pivot_longer(cols = starts_with(\"values\"), \n                   names_prefix = \"values_\")\n\nrename(tab %>% dplyr::select(-ranges), \n       Year=name,\n       `Bracket2`=below,\n       `People (M)`=value, \n       Bracket=labels) %>% \n  gt::gt() \n```\n\n\n\n* Pyramids have angles, I strive to stay away from angles.\n* The x axis is reversed.\n* All quantities are changing but there are horizontal levels trying to guide us. I think they do more harm than good.\n  * These horizontal levels play the role of a y axis, only to add confusion because the scale is logarithmic.\n\n## Enter Waffle\n\nI think Waffle plots are a fantastic alternative to all the nasty pie and pyramid plots. The representation of fractions is clear and explicit, and there are no angles that mess things up. I kept their colors to make it as similar as possible. Note that the world's population has increased, so 1 square (or 1% of the population) is different on the 2011 and 2021 plots.\n\n```{r}\n#| label: firstwaffle\n#| eval: false\n\n# as of today, waffle depends on plyr. I don't think I want to install it just to make this plot...looking forward to removal of plyr dependency, likely soon\n\nsq_val <- tab %>% group_by(name) %>% summarise(people = round(sum(value)/100)) %>% pull(people)\n\narrow_df <- tibble::tibble(\n  name = c(2011, 2021),\n  x=c(-1, 12),\n  xend = c(0,11),\n  y = 1.5,\n  yend=1,\n  label = paste(\"1 ◻ ≈\", sq_val, \"M people\"),\n  lab_x = c(5.5, 5.5),\n  lab_y = c(-1, -1)\n)\n\nmy_caption <- \"Data: Credit Suisse\\nViz:@NeuroMLA\"\ntab %>% \n  ggplot() +\n  geom_label(data = arrow_df, aes(x=lab_x, y=lab_y, label=label)) +\n  waffle::geom_waffle(aes(fill=labels, values=value),\n                      color=\"white\",\n                      flip = T, \n                      make_proportional = T, size=1) +\n  facet_wrap(~name) +\n  coord_equal() +\n  theme_void() +\n  theme(legend.position = \"bottom\",\n        strip.text = element_text(size=22),\n        plot.title = element_text(size=22, hjust=0.5),\n        plot.caption = element_text(hjust=0.5)) +\n  labs(fill = \"Wealth Range (USD)\",\n       title = \"Global Wealth Distribution\",\n       caption = my_caption) +\n  scale_fill_manual(values = fill_color)\n\n```\n\n![](firstwaffle-1.png)\n\n## The case\n\nThe case that people are trying to make is: \"Good News! There's more people in the wealthier categories!\". For sure, we can say that these numbers indeed point towards the right direction. Is it fast enough? That depends on how much expectations you had for the global change we can achieve in one decade. If anything, things are better, but we have much room for improvement.  \n\nIn the following plot, I tried to focus attention on the bottom bracket. If we manage to get people out of the bottom bracket, that would be a huge triumph for global development. \n\n\n```{r}\n#| eval: false\n#| label: secondwaffle\ntab %>% \n  ggplot() +\n  geom_label(data = arrow_df, aes(x=lab_x, y=lab_y, label=label)) +\n  waffle::geom_waffle(aes(fill=below, values=value),\n                      color=\"white\",\n                      flip = T, \n                      alpha=0.8,\n                      make_proportional = T, size=1) +\n  facet_wrap(~name) +\n  coord_equal() +\n  theme_void() +\n  theme(legend.position = \"bottom\",\n        strip.text = element_text(size=22),\n        plot.title = element_text(size=22, hjust=0.5),\n        plot.caption = element_text(hjust=0.5)) +\n  labs(fill = \"Wealth Range (USD)\",\n       title = \"Global Wealth Distribution\",\n       caption = my_caption) +\n  paletteer::scale_fill_paletteer_d(\"awtools::mpalette\") \n#  geom_curve(data = arrow_df, aes(x=x, xend=xend,y=y,yend=yend),\n#             arrow = arrow(length = unit(0.03, \"npc\")))\n\n```\n\n\n![](secondwaffle-1.png)\n\nWe are making progress. Progress is slow, but the share of people living in the bottom bracket is decreasing. However, looking at these plots, I cannot help but notice the immense task we have ahead: we still have to lift half of the planet out of this bracket. This challenge is something I wanted to convey, and I think it's more evident in these waffle than the pyramid plots. I think Hans, put it better than anyone:\n\n> Things can be bad, and getting better. \n> -- Hans Rosling\n\n## The downside\n\nThere are downsides of using Waffle Plots. I'm quoting from a nice person who gave me feedback directly, they said: \"One disadvantage of the waffle plot is a lack of precision. For instance, your version doesn't show the change at the top from .5% to 1.2% (more than double!)\".\n\nI was somewhat saving this idea for another plot. What idea? The idea that *all* wealthier brackets increased by a lot (~2X!). I decided to go with a bar plot showing the absolute number of people. This is because I want to keep numbers in terms of people, real human beings that belong to each bracket. Each person that we move is a lot, and we have a lot to do!\n\n```{r}\n#| label: colplot\n\nmy_caption <- \"Data: Credit Suisse\\nViz:@NeuroMLA\"\nratio_tab <- tab %>% \n  mutate(ratio = round(last(value)/first(value),1), .by=labels,\n         max_val = max(value)) %>% \n  distinct(labels, max_val, ratio)\n\n  tab %>% \n  ggplot(aes(labels, value, fill = name)) + \n  geom_col(position = position_dodge(), width = 0.5) +\n  geom_label(data=ratio_tab, \n            aes(labels, y = max_val + 10^3/2, label=paste0(ratio, \"x\")),\n            inherit.aes = FALSE)+ \n  geom_hline(yintercept = 0)+\n  theme_minimal()+\n  theme(legend.position = \"none\",\n        panel.grid.major.y = element_line(color=\"gray50\", linetype = 3),\n        panel.grid.major.x = element_blank(),\n        strip.text = element_text(size=12),\n        plot.title = element_text(size=16, hjust=0.5, face = \"bold\"),\n        plot.caption = element_text(hjust=0.5))+\n  scale_y_continuous(labels = scales::label_number(scale_cut = scales::cut_short_scale())) +\n  labs(y = \"Global Population\", \n       x=element_blank(),\n       title = \"The rise of the wealthier\",\n       subtitle = \"We almost doubled the number of people in higher brackets during in a decade.\",\n       caption= my_caption)+\n  paletteer::scale_fill_paletteer_d(\"basetheme::void\")\n\n```\n\n\nThis is not the only issue with waffle plots. As I said before, the wealth brackets here are logarithmic, and the highest bracket is virtually infinite. Counting methods (aka, counting how many people belong to each bracket), can go far to give a sense of the overall distribution, but cannot bring a picture of the massive differences in wealth between the higher and the lower brackets when the axis is discretized to condense a logarithmic scale. Looking further the actual wealth range exceeds my intentions for this quick makeover, but I couldn't help to mention it.\n\n\n","srcMarkdownNoYaml":"\n\nI love [Future Crunch](https://futurecrunch.com/). The idea of receiving positive news that I wouldn't otherwise get is fantastic and I appreciate the work they do. However, during one of the latest editions I got a pyramid plot coming from [Credit Suisse](https://www.credit-suisse.com/about-us-news/en/articles/news-and-expertise/credit-suisse-global-wealth-report-2022-fast-wealth-growth-in-times-of-uncertainty-202209.html?ref=Future+Crunch-newsletter) which was really hard to read. Moreover, the people who made the plot were trying to make the case that the world is a better place, because there is less inequality.\n\nYou are welcome to try to interpret the plot on its source, [here's the link again](https://www.credit-suisse.com/about-us-news/en/articles/news-and-expertise/credit-suisse-global-wealth-report-2022-fast-wealth-growth-in-times-of-uncertainty-202209.html?ref=Future+Crunch-newsletter). Because I think the representation is lacking, I do want to produce my own version using their data (aka, the values provided in their plot). Here's a basic table for their data:\n\n```{r}\n#| label: data\n#| warning: !expr F\n#| message: !expr F\nlibrary(tidyverse)\nlibrary(waffle)\nranges <- 1:4\nnames(ranges) <- c(\"<10K\", \"10K-100K\", \"100K-1M\", \"1M+\")\nvalues_2011 <-c(3054, 1066, 369, 29.7)\nvalues_2021 <- c(2818, 1791, 627, 62.5)\nfill_color = c(\"#b27500ff\", \"#ebaf34ff\", \"#e5d2afff\", \"#265682ff\")\n\ntab <-\ntibble::tibble(\n  ranges=ranges,\n  labels=factor(names(ranges), levels = names(ranges)),\n  below = c(\"<10K\", \"10K+\", \"10K+\",\"10K+\"),\n  values_2011,\n  values_2021\n) %>% pivot_longer(cols = starts_with(\"values\"), \n                   names_prefix = \"values_\")\n\nrename(tab %>% dplyr::select(-ranges), \n       Year=name,\n       `Bracket2`=below,\n       `People (M)`=value, \n       Bracket=labels) %>% \n  gt::gt() \n```\n\n\n## Why I don't like the pyramid plot\n\n* Pyramids have angles, I strive to stay away from angles.\n* The x axis is reversed.\n* All quantities are changing but there are horizontal levels trying to guide us. I think they do more harm than good.\n  * These horizontal levels play the role of a y axis, only to add confusion because the scale is logarithmic.\n\n## Enter Waffle\n\nI think Waffle plots are a fantastic alternative to all the nasty pie and pyramid plots. The representation of fractions is clear and explicit, and there are no angles that mess things up. I kept their colors to make it as similar as possible. Note that the world's population has increased, so 1 square (or 1% of the population) is different on the 2011 and 2021 plots.\n\n```{r}\n#| label: firstwaffle\n#| eval: false\n\n# as of today, waffle depends on plyr. I don't think I want to install it just to make this plot...looking forward to removal of plyr dependency, likely soon\n\nsq_val <- tab %>% group_by(name) %>% summarise(people = round(sum(value)/100)) %>% pull(people)\n\narrow_df <- tibble::tibble(\n  name = c(2011, 2021),\n  x=c(-1, 12),\n  xend = c(0,11),\n  y = 1.5,\n  yend=1,\n  label = paste(\"1 ◻ ≈\", sq_val, \"M people\"),\n  lab_x = c(5.5, 5.5),\n  lab_y = c(-1, -1)\n)\n\nmy_caption <- \"Data: Credit Suisse\\nViz:@NeuroMLA\"\ntab %>% \n  ggplot() +\n  geom_label(data = arrow_df, aes(x=lab_x, y=lab_y, label=label)) +\n  waffle::geom_waffle(aes(fill=labels, values=value),\n                      color=\"white\",\n                      flip = T, \n                      make_proportional = T, size=1) +\n  facet_wrap(~name) +\n  coord_equal() +\n  theme_void() +\n  theme(legend.position = \"bottom\",\n        strip.text = element_text(size=22),\n        plot.title = element_text(size=22, hjust=0.5),\n        plot.caption = element_text(hjust=0.5)) +\n  labs(fill = \"Wealth Range (USD)\",\n       title = \"Global Wealth Distribution\",\n       caption = my_caption) +\n  scale_fill_manual(values = fill_color)\n\n```\n\n![](firstwaffle-1.png)\n\n## The case\n\nThe case that people are trying to make is: \"Good News! There's more people in the wealthier categories!\". For sure, we can say that these numbers indeed point towards the right direction. Is it fast enough? That depends on how much expectations you had for the global change we can achieve in one decade. If anything, things are better, but we have much room for improvement.  \n\nIn the following plot, I tried to focus attention on the bottom bracket. If we manage to get people out of the bottom bracket, that would be a huge triumph for global development. \n\n\n```{r}\n#| eval: false\n#| label: secondwaffle\ntab %>% \n  ggplot() +\n  geom_label(data = arrow_df, aes(x=lab_x, y=lab_y, label=label)) +\n  waffle::geom_waffle(aes(fill=below, values=value),\n                      color=\"white\",\n                      flip = T, \n                      alpha=0.8,\n                      make_proportional = T, size=1) +\n  facet_wrap(~name) +\n  coord_equal() +\n  theme_void() +\n  theme(legend.position = \"bottom\",\n        strip.text = element_text(size=22),\n        plot.title = element_text(size=22, hjust=0.5),\n        plot.caption = element_text(hjust=0.5)) +\n  labs(fill = \"Wealth Range (USD)\",\n       title = \"Global Wealth Distribution\",\n       caption = my_caption) +\n  paletteer::scale_fill_paletteer_d(\"awtools::mpalette\") \n#  geom_curve(data = arrow_df, aes(x=x, xend=xend,y=y,yend=yend),\n#             arrow = arrow(length = unit(0.03, \"npc\")))\n\n```\n\n\n![](secondwaffle-1.png)\n\nWe are making progress. Progress is slow, but the share of people living in the bottom bracket is decreasing. However, looking at these plots, I cannot help but notice the immense task we have ahead: we still have to lift half of the planet out of this bracket. This challenge is something I wanted to convey, and I think it's more evident in these waffle than the pyramid plots. I think Hans, put it better than anyone:\n\n> Things can be bad, and getting better. \n> -- Hans Rosling\n\n## The downside\n\nThere are downsides of using Waffle Plots. I'm quoting from a nice person who gave me feedback directly, they said: \"One disadvantage of the waffle plot is a lack of precision. For instance, your version doesn't show the change at the top from .5% to 1.2% (more than double!)\".\n\nI was somewhat saving this idea for another plot. What idea? The idea that *all* wealthier brackets increased by a lot (~2X!). I decided to go with a bar plot showing the absolute number of people. This is because I want to keep numbers in terms of people, real human beings that belong to each bracket. Each person that we move is a lot, and we have a lot to do!\n\n```{r}\n#| label: colplot\n\nmy_caption <- \"Data: Credit Suisse\\nViz:@NeuroMLA\"\nratio_tab <- tab %>% \n  mutate(ratio = round(last(value)/first(value),1), .by=labels,\n         max_val = max(value)) %>% \n  distinct(labels, max_val, ratio)\n\n  tab %>% \n  ggplot(aes(labels, value, fill = name)) + \n  geom_col(position = position_dodge(), width = 0.5) +\n  geom_label(data=ratio_tab, \n            aes(labels, y = max_val + 10^3/2, label=paste0(ratio, \"x\")),\n            inherit.aes = FALSE)+ \n  geom_hline(yintercept = 0)+\n  theme_minimal()+\n  theme(legend.position = \"none\",\n        panel.grid.major.y = element_line(color=\"gray50\", linetype = 3),\n        panel.grid.major.x = element_blank(),\n        strip.text = element_text(size=12),\n        plot.title = element_text(size=16, hjust=0.5, face = \"bold\"),\n        plot.caption = element_text(hjust=0.5))+\n  scale_y_continuous(labels = scales::label_number(scale_cut = scales::cut_short_scale())) +\n  labs(y = \"Global Population\", \n       x=element_blank(),\n       title = \"The rise of the wealthier\",\n       subtitle = \"We almost doubled the number of people in higher brackets during in a decade.\",\n       caption= my_caption)+\n  paletteer::scale_fill_paletteer_d(\"basetheme::void\")\n\n```\n\n\nThis is not the only issue with waffle plots. As I said before, the wealth brackets here are logarithmic, and the highest bracket is virtually infinite. Counting methods (aka, counting how many people belong to each bracket), can go far to give a sense of the overall distribution, but cannot bring a picture of the massive differences in wealth between the higher and the lower brackets when the axis is discretized to condense a logarithmic scale. Looking further the actual wealth range exceeds my intentions for this quick makeover, but I couldn't help to mention it.\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"filters":["social-embeds","social-share"],"include-after-body":["../../footer.html"],"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","comments":{"utterances":{"repo":"matiasandina/Webpage","label":"Comment","theme":"github-dark"}},"theme":{"light":["flatly","../../theme.scss"],"dark":["darkly","../../dark.scss"]},"code-copy":true,"grid":{"body-width":"900px","margin-width":"300px","gutter-width":"1.5rem"},"title-block-banner":true,"license":"CC BY","toc-title":"Table of contents","toc-location":"right","author":[{"name":"Matias Andina","url":"https://matiasandina.netlify.app","affiliation":"Massachusetts Institute of Technology","orcid":"0000-0002-1996-2539"}],"citation":true,"share":{"permalink":"https://matiasandina.netlify.app/","description":"Matias Andina","twitter":true,"facebook":true,"reddit":true,"stumble":true,"tumblr":false,"linkedin":true,"email":true,"mastodon":true},"title":"Inequality","subtitle":"Makeover of Pyramid Plot","date":"2022-10-10","tags":["fun","design"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}