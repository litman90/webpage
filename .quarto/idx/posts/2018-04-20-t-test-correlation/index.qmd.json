{"title":"t-tests for correlation","markdown":{"yaml":{"title":"t-tests for correlation","date":"2018-04-20","categories":["teaching"]},"headingText":"How to","containsRefs":false,"markdown":"\n\nI have been having a recurrent nightmare in the Statistics class I'm teaching. The nightmare goes like:  \n\n> We used an independent sample t-test and found a significant correlations (t(df)=...).\n\nIt also comes in the shape of non-significant data, maybe even more haunting than the first version.\n\n> We found a non-significant difference between Factor level A (M= ..., SD= ... ) and Factor level B (M= ..., SD= ...), meaning there is a negative correlation between Factor and response variable.\n\nThese phrases are not actual statements made by my students on paper **but** they come quite close. I have been trying to wrap my head around their confusion between correlation and t-test, which persists even though I remove points on papers and make announcements in class. It persists whether I repeat the material from a different angle, draw stuff on the board, and have face to face interaction with firm believers of the *t-correlation* theory. I have made frustrated comments during TA meetings only to find that other TAs experience the same issue. One of the TAs was adamant about it, she even makes them sing! But the confusion is still intact.\n\n\nIt's not my full intention to preach about what a *t-test* or a correlation analysis are (although see below). I'm trying to figure out what makes students be so confused about these two. More thoughts on this topic will come in the near future.\n\n## Two different worlds\n\nCorrelation and factor analysis are essentially different. Continuous vs discrete. A car's transmission can be automatic *or* manual. There is no scale, no range of values. We can study how a continuous variable (such as miles per gallon) is affected by the type of transmission.\n\n```{r}\n#| label: factor-t\n#| echo: !expr F\n#| warning: !expr F\n\nsuppressPackageStartupMessages(library(ggplot2))\nmtcars$am_factor <- ifelse(mtcars$am==0, 'Automatic', 'Manual')\nggplot(mtcars, aes(am_factor, mpg)) +\n  geom_point(size=2, alpha=0.8) +\n  xlab(\"Transmission\") +\n  ylab(\"Miles per gallon\") +\n   theme_light() + theme(text = element_text(size=20))\n\n```\n\nMoreover, we are trying to collapse the groups into a comparison of their means, standard deviations, and N. But let's focus on the means, let's reduce the previous scatterplot to two dots.\n\n```{r}\n#| label: mean-comp\n#| echo: !expr F\n\nggplot(mtcars, aes(am_factor, mpg)) +\n  stat_summary(fun.y = 'mean', geom='point', size=2, color='red')+\n  xlab(\"Transmission\") + ylim(10, 35) +\n  ylab(\"Miles per gallon\") +\n   theme_light() + theme(text = element_text(size=20))\n\n```\n\nThe underlying question is: Are these 2 values *statistically* different? We can test for it, using a t-test!\n\n```{r}\n#| label: am-ttest\n#| echo: !expr F\n\nttest_table <- broom::tidy(t.test(mpg~am, data=mtcars))\n\n```\n\nUsing a *t-test*, we can find that the magnitude of the difference between groups is `r abs(round(ttest_table$estimate, 3))`, which is unlikely to be found by chance. If our assumptions hold, the probability of finding such a difference when there is none is p=`r round(ttest_table$p.value, 3)`.\n\nOn the other hand, we could be interested in studying the relationship between two continuous variables. The nature of these variables is fairly different from discrete ones. Both variables are unconstrained regarding the values they can take (Big, small and fractions allowed!). In this case, we can take a look at how the weight of cars is related to the miles per gallon.  \n\n```{r}\n#| label: wt-mpg\n#| echo: !expr F\n\nggplot(mtcars, aes(wt, mpg)) + geom_point(size=2, alpha=0.8) +\n  theme_light() + \n  ylab(\"Miles per gallon\") +\n  xlab(\"Weight (1000 lbs)\")+ \n  theme(text = element_text(size=20))\n\n```\n\n\nWe would see that, overall, heavier cars tend to be able to drive less miles per gallon of gas. In principle, with a correlation analysis we wouldn't be able to establish causal relationships. Is it the weight causing the mileage per gallon to go down? We can't address that question with this type of analysis. But we can test whether there is a *significant* association using a linear correlation test.\n\n```{r}\n#| label: cor-test\n#| echo: false\n\ncor_test_table <- broom::tidy(with(mtcars, cor.test(wt, mpg)))\n\n```\n\nThe correlation analysis shows a significant negative correlation (r = `r round(cor_test_table$estimate, 3)`), which is different from zero, unlikely to be found by chance (p = $`r cor_test_table$p.value`$).\n","srcMarkdownNoYaml":"\n\nI have been having a recurrent nightmare in the Statistics class I'm teaching. The nightmare goes like:  \n\n> We used an independent sample t-test and found a significant correlations (t(df)=...).\n\nIt also comes in the shape of non-significant data, maybe even more haunting than the first version.\n\n> We found a non-significant difference between Factor level A (M= ..., SD= ... ) and Factor level B (M= ..., SD= ...), meaning there is a negative correlation between Factor and response variable.\n\nThese phrases are not actual statements made by my students on paper **but** they come quite close. I have been trying to wrap my head around their confusion between correlation and t-test, which persists even though I remove points on papers and make announcements in class. It persists whether I repeat the material from a different angle, draw stuff on the board, and have face to face interaction with firm believers of the *t-correlation* theory. I have made frustrated comments during TA meetings only to find that other TAs experience the same issue. One of the TAs was adamant about it, she even makes them sing! But the confusion is still intact.\n\n## How to\n\nIt's not my full intention to preach about what a *t-test* or a correlation analysis are (although see below). I'm trying to figure out what makes students be so confused about these two. More thoughts on this topic will come in the near future.\n\n## Two different worlds\n\nCorrelation and factor analysis are essentially different. Continuous vs discrete. A car's transmission can be automatic *or* manual. There is no scale, no range of values. We can study how a continuous variable (such as miles per gallon) is affected by the type of transmission.\n\n```{r}\n#| label: factor-t\n#| echo: !expr F\n#| warning: !expr F\n\nsuppressPackageStartupMessages(library(ggplot2))\nmtcars$am_factor <- ifelse(mtcars$am==0, 'Automatic', 'Manual')\nggplot(mtcars, aes(am_factor, mpg)) +\n  geom_point(size=2, alpha=0.8) +\n  xlab(\"Transmission\") +\n  ylab(\"Miles per gallon\") +\n   theme_light() + theme(text = element_text(size=20))\n\n```\n\nMoreover, we are trying to collapse the groups into a comparison of their means, standard deviations, and N. But let's focus on the means, let's reduce the previous scatterplot to two dots.\n\n```{r}\n#| label: mean-comp\n#| echo: !expr F\n\nggplot(mtcars, aes(am_factor, mpg)) +\n  stat_summary(fun.y = 'mean', geom='point', size=2, color='red')+\n  xlab(\"Transmission\") + ylim(10, 35) +\n  ylab(\"Miles per gallon\") +\n   theme_light() + theme(text = element_text(size=20))\n\n```\n\nThe underlying question is: Are these 2 values *statistically* different? We can test for it, using a t-test!\n\n```{r}\n#| label: am-ttest\n#| echo: !expr F\n\nttest_table <- broom::tidy(t.test(mpg~am, data=mtcars))\n\n```\n\nUsing a *t-test*, we can find that the magnitude of the difference between groups is `r abs(round(ttest_table$estimate, 3))`, which is unlikely to be found by chance. If our assumptions hold, the probability of finding such a difference when there is none is p=`r round(ttest_table$p.value, 3)`.\n\nOn the other hand, we could be interested in studying the relationship between two continuous variables. The nature of these variables is fairly different from discrete ones. Both variables are unconstrained regarding the values they can take (Big, small and fractions allowed!). In this case, we can take a look at how the weight of cars is related to the miles per gallon.  \n\n```{r}\n#| label: wt-mpg\n#| echo: !expr F\n\nggplot(mtcars, aes(wt, mpg)) + geom_point(size=2, alpha=0.8) +\n  theme_light() + \n  ylab(\"Miles per gallon\") +\n  xlab(\"Weight (1000 lbs)\")+ \n  theme(text = element_text(size=20))\n\n```\n\n\nWe would see that, overall, heavier cars tend to be able to drive less miles per gallon of gas. In principle, with a correlation analysis we wouldn't be able to establish causal relationships. Is it the weight causing the mileage per gallon to go down? We can't address that question with this type of analysis. But we can test whether there is a *significant* association using a linear correlation test.\n\n```{r}\n#| label: cor-test\n#| echo: false\n\ncor_test_table <- broom::tidy(with(mtcars, cor.test(wt, mpg)))\n\n```\n\nThe correlation analysis shows a significant negative correlation (r = `r round(cor_test_table$estimate, 3)`), which is different from zero, unlikely to be found by chance (p = $`r cor_test_table$p.value`$).\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"filters":["social-embeds","social-share"],"include-after-body":["../../footer.html"],"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","comments":{"utterances":{"repo":"matiasandina/Webpage","label":"Comment","theme":"github-dark"}},"theme":{"light":["flatly","../../theme.scss"],"dark":["darkly","../../dark.scss"]},"code-copy":true,"grid":{"body-width":"900px","margin-width":"300px","gutter-width":"1.5rem"},"title-block-banner":true,"license":"CC BY","toc-title":"Table of contents","toc-location":"right","author":[{"name":"Matias Andina","url":"https://matiasandina.netlify.app","affiliation":"Massachusetts Institute of Technology","orcid":"0000-0002-1996-2539"}],"citation":true,"share":{"permalink":"https://matiasandina.netlify.app/","description":"Matias Andina","twitter":true,"facebook":true,"reddit":true,"stumble":true,"tumblr":false,"linkedin":true,"email":true,"mastodon":true},"title":"t-tests for correlation","date":"2018-04-20","categories":["teaching"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}