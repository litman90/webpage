<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="Matias Andina">
<meta name="description"
    content="For many purposes, I find myself in need of a Graphical User Interface (GUI). Thus, I experienced a forceful transition to Matlab. Let’s be honest, Matlab can do powerful things, it’s a great language to attempt to dominate (note to self: learn python!). However, I find myself over and over thinking in R mode. Something along the lines of:
 Gimme all the files in…
 Will be easily accomplished in R" />
<meta name="keywords" content="homepage, blog, neuroscience, science, programming, freelancer" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/2018/04/matlab-list_files/" />


<title>
    
    Matlab list_files :: Matias Andina  — Home &amp; Blog
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.73f55a8d452be4a71b2960620b80252cf69abd84d63fe7501abf0a39b1a70a78.css">



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="/favicon.ico">
<meta name="theme-color" content="#252627"><meta itemprop="name" content="Matlab list_files">
<meta itemprop="description" content="For many purposes, I find myself in need of a Graphical User Interface (GUI). Thus, I experienced a forceful transition to Matlab. Let’s be honest, Matlab can do powerful things, it’s a great language to attempt to dominate (note to self: learn python!). However, I find myself over and over thinking in R mode. Something along the lines of:
 Gimme all the files in…
 Will be easily accomplished in R">


<meta itemprop="datePublished" content="2018-04-24T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-04-24T20:23:02-04:00" />
<meta itemprop="wordCount" content="530">



<meta itemprop="keywords" content="learning,ideas,R,Matlab," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/img/m-gray.jpg"/>

<meta name="twitter:title" content="Matlab list_files"/>
<meta name="twitter:description" content="For many purposes, I find myself in need of a Graphical User Interface (GUI). Thus, I experienced a forceful transition to Matlab. Let’s be honest, Matlab can do powerful things, it’s a great language to attempt to dominate (note to self: learn python!). However, I find myself over and over thinking in R mode. Something along the lines of:
 Gimme all the files in…
 Will be easily accomplished in R"/>




<meta property="article:published_time" content="2018-04-24 00:00:00 &#43;0000 UTC" />







    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Matias Andina</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>

        

        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/research/">Research</a></li><li><a href="/post/">Posts</a></li><li><a href="/projects/">Projects</a></li><li><a href="/contact/">Contact</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="/2018/04/matlab-list_files/">Matlab list_files</a></h2>

            

            <div class="post-content">
                


<p>For many purposes, I find myself in need of a Graphical User Interface (GUI). Thus, I experienced a forceful transition to Matlab. Let’s be honest, Matlab can do powerful things, it’s a great language to attempt to dominate (note to self: learn python!). However, I find myself over and over thinking in <code>R</code> mode. Something along the lines of:</p>
<blockquote>
<p>Gimme all the files in…</p>
</blockquote>
<p>Will be easily accomplished in <code>R</code></p>
<pre class="r"><code>list.files(...)</code></pre>
<p>This command can handle many many options, with <code>pattern</code> being among my favorite. More importantly, this command returns a useful <code>character</code> vector. No extra dots, no list of lists, no array. Just, useful. On the other hand, Matlab has <code>dir</code> and <code>ls</code> both of which are not satisfactory.</p>
<pre class="octave"><code>dir

.                                                      
..                                    
something.m                            
something_else.m                               
LookHere.m
</code></pre>
<p>Yes…Matlab’s version can also handle some form of regular expression matching. But, mind the dots and the structure! Matlab’s <code>dir</code> has a ton of things on it.</p>
<pre class="octave"><code>&gt;&gt; q = dir

q = 

  20×1 struct array with fields:

    name
    folder
    date
    bytes
    isdir
    datenum</code></pre>
<p>Matlab <code>ls</code> function is also full of deadly traps.</p>
<pre class="octave"><code>qq = ls

qq =

  20×28 char array

    &#39;.                           &#39;
    &#39;..                          &#39;
    &#39;many_things_here.ext        &#39;
</code></pre>
<div id="the-solution" class="section level2">
<h2>The solution</h2>
<p>I found myself fighting for a character vector or array (<code>nx1</code>) I can feed into a function/loop/whatever.</p>
<p>So after many many many times fighting against classes, with functions that expect <code>char</code> instead of <code>string</code>, or <code>cell</code>, or <code>whatever</code>, I decided to create something that resembles (at least partially) the functionality I was looking for. It’s not perfect, in fact, please enlighten me with a better approach. For now, I will be using <code>list_files.m</code>. Wanna use it? Be my guest, see below:</p>
<pre class="octave"><code>
% The idea of this function is to have something that works to list files
% Matlab has too many weird things with dir/patterns/etc...
% It could be slow if calling in a BIG dir and then subsetting
% Otherwise it should work pretty fast

function filenames = list_files(varargin)

% Open input parser
p = inputParser();

% Add possible values
addOptional(p, &#39;Interactive&#39;, true, @islogical)
addOptional(p, &#39;Dirname&#39;, &#39;0&#39;, @ischar)
addOptional(p, &#39;Pattern&#39;, {&#39;.&#39;}, @iscell)
addOptional(p, &#39;FullPath&#39;, false, @islogical)


% parse
parse(p, varargin{:});

% retrieve things from parser
Interactive = p.Results.Interactive;
Dirname = p.Results.Dirname;
Pattern = p.Results.Pattern;
FullPath = p.Results.FullPath;


%% Dirname goes first
% If we didn&#39;t provide a Dirname, both defaults will hold
% If we provided a Dirname, we will read from there

if (Interactive &amp;&amp; string(Dirname) == &#39;0&#39;)

    dirname = uigetdir();

else
    
    dirname = Dirname;
    
end


if ~isdir(dirname)
    error(&#39;Dirname not valid, check dirname provided is character and exists.&#39;)
end

% actually call dir
    d=dir(dirname);
% Remove the dots matlab puts to things
    d=d(~ismember({d.name},{&#39;.&#39;,&#39;..&#39;}));

    % Get filenames
    % Output as an mx1 cell
    
    filenames = {d.name}&#39;;

        
%% Subset by pattern
    
    default_pattern = string(Pattern) == &#39;.&#39;;

    if (~default_pattern) % non default case
    
    % join cell patterns separated by the &#39;or&#39; regular expression
    query_expression = strjoin(Pattern, &#39;|&#39;);
    
    %  Subset the patterns
    filenames = filenames(~cellfun(@isempty,regexp(filenames, query_expression)));
    end
    
    % By default we return just the name
    % If you want the full path, call it!
    % it currently works only for 1 folder
    % Recursive = TRUE will be super nice!
    
    if FullPath
    filenames = fullfile(unique({d.folder}), filenames);
    end
end
</code></pre>
</div>

            </div>
        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="/tags/learning">learning</a></span><span class="tag"><a href="/tags/ideas">ideas</a></span><span class="tag"><a href="/tags/r">R</a></span><span class="tag"><a href="/tags/matlab">Matlab</a></span>
  				</p>
  				    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg><a href="e57f435a6735a7b144d90466a93c7affbb21a96b" target="_blank" rel="noopener">e57f435</a> @ 2018-04-24</p>
  			</div>

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="/">Matias Andina</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">rhazdon</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.4c3fb12a087ceed4a52cb5d57068a9795c7069617a01ca70f788052ad66e1791779e6c72686e1dc0ca13dc03b0203204b6566bb0dd1ee80de2b7ff4d8fe53db2.js" integrity="sha512-TD&#43;xKgh87tSlLLXVcGipeVxwaWF6Acpw94gFKtZuF5F3nmxyaG4dwMoT3AOwIDIEtlZrsN0e6A3it/9Nj&#43;U9sg=="></script>



    </body>
</html>
