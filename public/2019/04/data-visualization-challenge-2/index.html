<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Matias Andina">
<meta name="description" content="This post is made as a backup for the data visualization challenge number 2. Data comes from the daily posts of the members of the Data Visualization Society (DVS) on the DVS Slack channels. You can see everybody&amp;rsquo;s submissions for the challenge here.
I am also very motivated to explore the dark versions of the ggplot themes. The package I&amp;rsquo;m going to be using is called ggdark.
 I write fiction and non-fiction." />
<meta name="keywords" content="homepage, blog, neuroscience, science, programming, freelancer, R, learning" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/2019/04/data-visualization-challenge-2/" />


    <title>
        
            Data Visualization Challenge 2 :: Matias Andina  â€” Home &amp; Blog
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.9dd6e34900c7146ef761cb3cc94cf93488cd14f263324c6c86dc875864b46698.css">






<meta itemprop="name" content="Data Visualization Challenge 2">
<meta itemprop="description" content="This post is made as a backup for the data visualization challenge number 2. Data comes from the daily posts of the members of the Data Visualization Society (DVS) on the DVS Slack channels. You can see everybody&rsquo;s submissions for the challenge here.
I am also very motivated to explore the dark versions of the ggplot themes. The package I&rsquo;m going to be using is called ggdark.
 I write fiction and non-fiction.">


<meta itemprop="datePublished" content="2019-04-14T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-02-15T08:03:58-05:00" />
<meta itemprop="wordCount" content="776">



<meta itemprop="keywords" content="R,learning," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/img/m-gray.jpg"/>

<meta name="twitter:title" content="Data Visualization Challenge 2"/>
<meta name="twitter:description" content="This post is made as a backup for the data visualization challenge number 2. Data comes from the daily posts of the members of the Data Visualization Society (DVS) on the DVS Slack channels. You can see everybody&rsquo;s submissions for the challenge here.
I am also very motivated to explore the dark versions of the ggplot themes. The package I&rsquo;m going to be using is called ggdark.
 I write fiction and non-fiction."/>








    <meta property="article:published_time" content="2019-04-14 00:00:00 &#43;0000 UTC" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Matias Andina</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/research/">Research</a></li><li><a href="/post/">Posts</a></li><li><a href="/projects/">Projects</a></li><li><a href="/contact/">Contact</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="/2019/04/data-visualization-challenge-2/">Data Visualization Challenge 2</a></h2>

            
            
            

            <div class="post-content">
                

<p>This post is made as a backup for the data visualization challenge number 2. Data comes from the daily posts of the members of the Data Visualization Society (DVS) on the DVS Slack channels. You can see everybody&rsquo;s submissions for the challenge <a href="https://www.datavisualizationsociety.com/challenge2" target="_blank">here</a>.</p>

<p>I am also very motivated to explore the dark versions of the ggplot themes. The package I&rsquo;m going to be using is called <code>ggdark</code>.</p>

<hr />

<p><!--html_preserve--><blockquote>
<p>I write fiction and non-fiction.<br/>
I write open-source software.<br/>
I create generative art.  </p></p>

<p><p>All of these are available for free in different media.
If you like what I do, and want me to keep creating, you can contribute using the links below.</p>
</blockquote>
<!--/html_preserve--><!--html_preserve--><table style="width:100%">
  <tr>
  <th>Patreon</th>
  <td>
  <a href="https://www.patreon.com/bePatron?u=25827926" data-patreon-widget-type="become-patron-button">Become a Patron!</a><script async src="https://c6.patreon.com/becomePatronButton.bundle.js"></script>
  </td>
  <tr>
    <td>
    </td>
  </tr>
  <tr>
  <th>Paypal</th>
  <td>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_donations" />
<input type="hidden" name="business" value="BWWTTZ2XSDAZ8" />
<input type="hidden" name="currency_code" value="USD" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form></p>

<p></td>
  </tr>
</table>
<!--/html_preserve--></p>

<hr />

<h2 id="dive-in">Dive in</h2>

<p>These are the libraries we&rsquo;ll need:</p>

<pre><code class="language-r">library(tidyverse)
library(ggdark)
library(lubridate)
</code></pre>

<p>We read the data from the repository.</p>

<pre><code class="language-r">df &lt;- read_csv(&quot;https://raw.githubusercontent.com/data-visualization-society/datavizsociety/master/challenge_data/dvs_challenge_2_channel_topics_over_time/flattened_channel_data.csv&quot;)
</code></pre>

<p>Let&rsquo;s perform some summary stats. There&rsquo;s 62 channels but I will focus on the top 15 channels (according to their total volume of characters). I&rsquo;m using this metric because the correlation between characters and the number of posts is, naturally, good.</p>

<pre><code class="language-r">ggplot(df, aes(posts+responses, characters))+
  geom_smooth(method = &quot;lm&quot;, se=FALSE, lty=2)+
  geom_point(alpha=0.4)+
  dark_theme_bw()
</code></pre>

<p><img src="/post/2019-04-14-data-visualization-challenge-2/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>

<p>Summary.</p>

<pre><code class="language-r">sum_df &lt;- df %&gt;% group_by(channel) %&gt;%
  summarise(total_channel = sum(characters),
         median_channel = median(characters)) %&gt;%
  top_n(15, wt =  total_channel) %&gt;%
  arrange(desc(total_channel))
</code></pre>

<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)
</code></pre>

<p>Modify the original data and do some stats.</p>

<pre><code class="language-r">df &lt;- df %&gt;% group_by(channel) %&gt;%
  mutate(total_channel = sum(characters),
         median_channel = median(characters),
         char_per_ping = characters/(posts+responses))   %&gt;%
  ungroup() %&gt;%
  group_by(date) %&gt;%
  mutate(daily_flow = sum(characters),
         daily_posts = sum(posts+responses))%&gt;%
  ungroup()
</code></pre>

<h2 id="first-pair">First pair</h2>

<p>The idea behind the first pair of plots is to see the sheer amount of volume on certain channels.</p>

<p>A good way of seeing how the top channels are ordered according to output is to do an ordered boxplot.</p>

<pre><code class="language-r">top_box &lt;-  df %&gt;%
  filter(channel %in% unique(sum_df$channel)) %&gt;%
  mutate(channel=fct_reorder(factor(channel), median_channel)) %&gt;%
ggplot(aes(channel, log10(characters)))+
  geom_boxplot()+
  coord_flip()+
  dark_theme_bw()+
  labs(x=&quot;&quot;)+
  ggtitle(sprintf(&quot;Top %s Channels&quot;,
                  length(unique(sum_df$channel))),
          &quot;Metric: median characters&quot;)
</code></pre>

<p>I&rsquo;m also curious about how persistent in time the flow is.</p>

<pre><code class="language-r">wave &lt;- df %&gt;%
  filter(channel %in% unique(sum_df$channel)) %&gt;%
  mutate(channel=fct_reorder(factor(channel), total_channel)) %&gt;% 
  ggplot(aes(date, channel, color=log10(characters))) +
  geom_line(aes(lwd=characters))+
  dark_theme_bw()+
  labs(y = &quot;&quot;, x=&quot;Date&quot;)+
  guides(color = FALSE)+
  scale_color_gradient(low = &quot;#613A00&quot;, high=&quot;#FA9800&quot;)+
  ggtitle(&quot;Top 15 channels&quot;, 
          &quot;Metric: total characters&quot;)+
  scale_y_discrete(position = &quot;right&quot;)+
  theme(legend.position = &quot;none&quot;)
</code></pre>

<p>We put everything together with the <code>cowplot</code> package.</p>

<pre><code class="language-r">cowplot::plot_grid(top_box, wave)
# Save the plot
#ggsave(&quot;box_wave.svg&quot;, width = 8, height = 4, units = &quot;in&quot;, dpi=&quot;retina&quot;)
</code></pre>

<p>I later modified this output a bit using Inkscape.</p>

<p><img src="/img/data-viz-challenge-2/box_wave.svg" alt="" /></p>

<h2 id="lengthy-channels">Lengthy channels</h2>

<p>While most of the channels have a low median, even below a full tweet, it looks like some channels tend to have very lengthy posts.</p>

<pre><code class="language-r"># Calculate median
median_post &lt;- median(
  df$characters/(df$posts +df$responses))

# Do the plot  
lengthy &lt;- ggplot(df, aes(log10(total_channel),
               char_per_ping))+
  dark_theme_bw()+
  geom_hline(yintercept = 280, lty=2)+
  geom_hline(yintercept = median(
    df$characters/(df$posts +df$responses)), lty=2)+
  annotate(&quot;text&quot;, x = 3, y= c(200, 340), label=c(&quot;Median post&quot;,
                                            &quot;One tweet&quot;))+
         geom_point(aes(color=channel), alpha=0.9)+
         scale_color_viridis_d(direction = -1)+
         theme(legend.position = &quot;none&quot;)+
  ggrepel::geom_text_repel(data=filter(df,
                                       char_per_ping &gt; 850),
            aes(label = channel, color=channel))+
  labs(x=bquote(
    log10 ~&quot;(total characters)&quot;),
    y=&quot;characeters per post&quot;)+
  ggtitle(&quot;Channels with lengthy posts&quot;)


# Save
# ggsave(&quot;lengthy.svg&quot;, width = 8, height = 4, units = &quot;in&quot;,dpi=&quot;retina&quot;)
</code></pre>

<p><img src="/img/data-viz-challenge-2/lengthy.svg" alt="" /></p>

<h2 id="share-of-flow">Share of flow</h2>

<p>What is the share of each channel on the total flow within the DataViz Slack?</p>

<pre><code class="language-r">top_top_channels &lt;- sum_df %&gt;%
  arrange(desc(total_channel)) %&gt;%
  slice(1:5)

share &lt;- df %&gt;% group_by(date) %&gt;%
  mutate(big_channel = ifelse(channel %in% top_top_channels$channel,
                              channel, &quot;other&quot;),
    total=sum(characters),
    rel_char = characters/total) %&gt;%
  ggplot(aes(date, rel_char, fill=big_channel))+
  geom_col(width = 1)+
  scale_fill_viridis_d(direction = -1)+
  dark_theme_bw()+
  theme(legend.position = &quot;bottom&quot;)+
  labs(x=&quot;&quot;, y=&quot;Relative share&quot;, fill=&quot;Channel&quot;)+
  ggtitle(&quot;Share of the conversation&quot;,
          &quot;Relative share of the total characters per day&quot;)+
  scale_x_date(limits = c(as.Date(&quot;2019-02-18&quot;),
                          as.Date(&quot;2019-04-23&quot;)),
               date_breaks = &quot;1 week&quot;, 
               date_labels = &quot;%b-%d&quot;)
</code></pre>

<p>It seems the initial bump was driven by many (lengthy) introductions, and nowadays the discussion has moved towards other channels.</p>

<pre><code class="language-r">intro_decay &lt;-  ggplot(df, aes(date, daily_flow))+
  geom_line()+
  geom_line(data=filter(df, channel %in% c(
    &quot;-introductions&quot;)),
            aes(date, characters), color=&quot;yellow&quot;)+
  dark_theme_bw()+
  xlab(&quot;&quot;) + ylab(&quot;Daily characters&quot;)+
  annotate(&quot;text&quot;, x=as.Date(c(&quot;2019-04-15&quot;,
                               &quot;2019-04-12&quot;)),
           y = c(1000, 50000),
           label=c(&quot;-introductions&quot;, &quot;all channels&quot;),
            color=c(&quot;yellow&quot;, &quot;white&quot;))+
    scale_x_date(limits = c(as.Date(&quot;2019-02-18&quot;),
                              as.Date(&quot;2019-04-23&quot;)),
                 date_breaks = &quot;1 week&quot;, 
                 date_labels = &quot;%b-%d&quot;)
</code></pre>

<p>Let&rsquo;s see how it looks like.</p>

<pre><code class="language-r"># We put everything together with cowplot
cowplot::plot_grid(share,intro_decay,
                   nrow = 2, rel_heights = c(2,1))
</code></pre>

<p><img src="/post/2019-04-14-data-visualization-challenge-2/index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>

<pre><code class="language-r"># ggsave(filename = &quot;share_plot.svg&quot;, width = 12, height = 6, dpi=&quot;retina&quot;)
</code></pre>

<p>I later modified this plot using Inkscape. The final version is this one.</p>

<p><img src="/img/data-viz-challenge-2/share_plot.svg" alt="" /></p>

<h2 id="weekday-news">Weekday news</h2>

<p>Because everything is seasonal, let&rsquo;s analyze by days of the week. Seems like Tuesday to Thursday are the days with most movement, waning down on Friday and into the weekend.</p>

<pre><code class="language-r">ggplot(df, aes(wday(date, label=TRUE, abbr = TRUE, week_start = 1),
               daily_posts))+
  geom_line(color=&quot;gray80&quot;)+
  stat_summary(geom = &quot;point&quot;,
               fun.y = median, size=2.5)+
  dark_theme_bw()+
  labs(x=&quot;&quot;, y=&quot;Number of daily posts&quot;)+
  ggtitle(&quot;Weekly post variations&quot;,
          &quot;Points represent median daily post on a 
          given weekday.\nLines show full range.&quot;)

# ggsave(filename= &quot;weekly_vars.svg&quot;, width = 8, height = 6 , dpi=&quot;retina&quot;)
</code></pre>

<p><img src="/img/data-viz-challenge-2/weekly_vars.svg" alt="" /></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="/tags/r/">R</a></span>
        <span class="tag"><a href="/tags/learning/">learning</a></span>
        
    </p>

            
			    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg><a href="c23fcc34ca4e223a9f89a3d7a6141683a1228202" target="_blank" rel="noopener">c23fcc3</a> @ 2021-02-15</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            <span><a href="/">Matias Andina</a></span>
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span><span><a href="/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        




 <script type="text/javascript" src="/bundle.min.af435e44374f1e99a669ea8cd5bb9a2fceed80588941a451bfddb66b86a67c9f40b0f417e9543a763f809aa7e9300d7b1d69bf99615810ba02ac70396d50fad5.js"></script>



    </body>
</html>
